<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寻觅</title>
    <style>
        html,
        body {
            font-family: "Times New Roman", serif;
            background: #eceff1;
            margin: 0;
            padding: 0;
            height: 100%;
        }

        * {
            box-sizing: border-box;
        }
        .hide {
            display: none;
        }

        pre {
            margin: 1em 0;
        }

        img,
        table {
            max-width: 100%;
        }

        .container {
            display: flex;
            height: 100%;
            overflow: hidden;
        }

        .sidebar {
            max-width: 450px;
            flex: 1;
            background-color: #e0e0e0;
            overflow-y: auto;
            padding: 35px;
        }

        .sidebar h2 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 1rem;
        }

        .sidebar h2 span {
            font-size: 0.75rem;
            font-family: serif;
            font-weight: 500;
            color: #999;
            vertical-align: bottom;
            padding-left: 10px;
        }


        .main-content {
            flex: 2;
            background-color: #fbfbfb;
            overflow-y: auto;
            padding: 30px;
        }

        h1 {
            color: #000033 !important;
            font-weight: bold;
            font-size: xx-large;
            text-align: center;
            line-height: 1.2;
        }

        h1>a,
        h2>a {
            color: #000033 !important;
            text-decoration: none;
        }

        .single-post .post-title {
            overflow: hidden;
            position: sticky;
            top: -31px;
            background-color: #fbfbfb;
            z-index: 1;
        }

        .title-meta {
            padding-bottom: 0.5em;
            text-align: center;
            border-bottom: 1px solid #ccc;
        }

        .main-content>* {
            font-style: normal;
            text-align: justify;
            line-height: 165%;
            max-width: 960px;
            margin: auto;
        }

        p>code {
            font-size: 0.85rem;
            padding: 2px 3px;
            margin: 0 3px;
            border-radius: 3px;
            background-color: #e2e2e2;
            font-family: Consolas, Monaco, monospace;
        }

        .table-wrapper {
            width: 100%;
            overflow: auto;
            margin: 1rem 0;
        }

        table {
            border-collapse: collapse;
            border: 2px solid rgb(140 140 140);
            font-size: 0.8rem;
            line-height: 1.2;
            width: 100%;
            padding: 0.5rem;
        }

        thead,
        tfoot {
            background-color: rgb(228 240 245);
        }

        th,
        td {
            border: 1px solid rgb(160 160 160);
            padding: 8px 10px;
        }

        tbody>tr:nth-of-type(even) {
            background-color: rgb(237 238 242);
        }

        tfoot th {
            text-align: right;
        }

        tfoot td {
            font-weight: bold;
        }

        #post-index {
            font-size: 0.875rem;
        }

        .post-index-grp {
            margin-bottom: 0.5em;
        }

        .post-index-date {
            color: #999;
            font-size: 0.875em;
        }

        a.nav-post-link {
            color: #333;
        }

        a.nav-post-link:hover {
            color: #000;
        }

        /* response */
        @media screen and (max-width: 1100px) {
            .container {
                display: block;
                overflow-y: scroll;
            }

            .main-content {
                overflow-y: visible;
            }

            .single-post .post-title {
                top: -1px;
            }


            .sidebar {
                max-width: 100%;
                padding: 1rem;
            }
        }
    </style>
<link rel="stylesheet" href="/css/hight.css?version=1723974088984"></head>

<body>
    <div class="container">

        <div class="sidebar">
            <h2> <a href="/">寻觅</a> <span>路漫漫其修远兮, 吾将上下而求索</span></h2>
            <div id="post-index">
                <div class="post-index-grp">
                    <div class="post-index-date">2024-08-07</div>
                    
                        <a class="nav-post-link" href="/post/2024_08_01_database_index_design.html">数据库索引设计</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2019-08-30</div>
                    
                        <a class="nav-post-link" href="/post/2019_08_30_001_fastjson_http_message_converter.html">FastJsonHttpMessageConverter转义字符串问题处理</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2019-06-11</div>
                    
                        <a class="nav-post-link" href="/post/2019_06_11_001_pinyin_split_algorithm.html">拼音拆分算法</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2018-06-14</div>
                    
                        <a class="nav-post-link" href="/post/2018_06_14_001_mysql_non-mainstream_fuzzy_query_full-text_index.html">MySQL非主流模糊查询: 全文索引</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2018-02-25</div>
                    
                        <a class="nav-post-link" href="/post/2018_02_25_image_theme_color_2.html">图像主题色提取简单实现（二）</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2017-08-12</div>
                    
                        <a class="nav-post-link" href="/post/2017_08_12_the_use_of_mysql_index.html">MySql索引的使用</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2017-08-07</div>
                    
                        <a class="nav-post-link" href="/post/2017_08_07_sql_optimization_for_paging_query.html">分页查询时SQL优化</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2017-04-23</div>
                    
                        <a class="nav-post-link" href="/post/2017_04_23_image_theme_color_1.html">图像主题色提取简单实现</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2017-03-02</div>
                    
                        <a class="nav-post-link" href="/post/2017_03_02_optimization_of_regular_expressions.html">正则表达式的优化</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2017-01-06</div>
                    
                        <a class="nav-post-link" href="/post/2017_01_06_cpu_branch_prediction.html">CPU 分支预测</a>
                    
                </div>
                
                <div class="post-index-grp">
                    <div class="post-index-date">2016-12-01</div>
                    
                        <a class="nav-post-link" href="/post/2016_12_01_nine_simple_css_image_filters.html">9个简单的CSS图像滤镜</a>
                    
                </div>
                </div>
        </div>
        <div class="main-content">
            <div id="main"><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="数据库索引设计" href="/post/2024_08_01_database_index_design.html">数据库索引设计</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2024-08-07</span>
            </div>
        </div>
        <div class="post-content"><h2>1. 索引的数据结构
</h2><p>mysql中索引默认为为B+树</p><p><img title="database_index" src="/data/static/image/post_0011/database_index.png"></p></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2024_08_01_database_index_design.html"><a href="/post/2024_08_01_database_index_design.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="FastJsonHttpMessageConverter转义字符串问题处理" href="/post/2019_08_30_001_fastjson_http_message_converter.html">FastJsonHttpMessageConverter转义字符串问题处理</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2019-08-30</span>
            </div>
        </div>
        <div class="post-content"><p>最近进行几个api项目进行合并，发现rest接口原有的<code>Date</code>类型被转成时间戳，与期望的<code>long</code>类型不一致，于是引入<code>FastJsonHttpMessageConverter</code>进行统一转换，复制粘贴一气呵成：</p><pre class="line-numbers  language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> HttpMessageConverters <span class="token function">fastJsonHttpMessageConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment" spellcheck="true">//1、定义一个convert转换消息的对象</span>
		FastJsonHttpMessageConverter fastConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">//2、添加fastjson的配置信息</span>
		FastJsonConfig fastJsonConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		fastJsonConfig<span class="token punctuation">.</span><span class="token function">setSerializerFeatures</span><span class="token punctuation">(</span>SerializerFeature<span class="token punctuation">.</span>WriteMapNullValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">//3、在convert中添加配置信息</span>
		fastConverter<span class="token punctuation">.</span><span class="token function">setFastJsonConfig</span><span class="token punctuation">(</span>fastJsonConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">//4、将convert添加到converters中</span>
		HttpMessageConverter<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> converter <span class="token operator">=</span> fastConverter<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpMessageConverters</span><span class="token punctuation">(</span>converter<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后自测中发现有些接口返回值被进行了二次转换，如：</p></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2019_08_30_001_fastjson_http_message_converter.html"><a href="/post/2019_08_30_001_fastjson_http_message_converter.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="拼音拆分算法" href="/post/2019_06_11_001_pinyin_split_algorithm.html">拼音拆分算法</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2019-06-11</span>
            </div>
        </div>
        <div class="post-content"><p>之前做一个诗词相关的网站时，本预想添加拼音，数据来源为hanlp或google翻译，但一直拖着没做。最近看到html对注音的支持，包括和标签，便写个demo看看效果。</p><p>数据来源使用google翻译，发现有些排版问题，有些拼音会进行分词并连接在一块，就算在汉字中间添加空格也不行，于是网上找找拼音拆分的算法，基本上都是根据声母和韵母回溯判断，例如：<a title="拼音拆分算法" href="https://my.oschina.net/u/2541538/blog/610747" target="_blank">拼音拆分算法</a>，我自己尝试用正则表达式直接拆分，发现效果不错。</p><p class="codepen" data-height="408" data-theme-id="dark" data-default-tab="js,result" data-user="snowtraces" data-slug-hash="agbVmg" style="height: 408px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="拼音拆分">
  <span>See the Pen <a href="https://codepen.io/snowtraces/pen/agbVmg/">
  拼音拆分</a> by snowtraces (<a href="https://codepen.io/snowtraces">@snowtraces</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script src="https://static.codepen.io/assets/embed/ei.js"></script></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2019_06_11_001_pinyin_split_algorithm.html"><a href="/post/2019_06_11_001_pinyin_split_algorithm.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="MySQL非主流模糊查询: 全文索引" href="/post/2018_06_14_001_mysql_non-mainstream_fuzzy_query_full-text_index.html">MySQL非主流模糊查询: 全文索引</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2018-06-14</span>
            </div>
        </div>
        <div class="post-content"><p>现实需求中，要求支持模糊查询再常见不过，可以直接使用数据库模糊匹配，但数据量百万后瓶颈就很明显，一般的选择是使用如solr/elasticSearch等搜索引擎工具。有时候不想引入更多的模块，或者是懒，可以直接使用mysql实现。</p><p>一提起全文索引，大家都知道lucence全家桶，但不知道或没用过mysql的全文索引功能。mysql全文索引即fulltext index，旧版本中，MyISAM存储引擎支持<code>char</code>、<code>varchar</code>和<code>text</code>字段建立；自5.6.24版本起，InnoDB引擎也加入全文索引，详细了解可以去看官方文档：<a title="mysql 5.6 document" href="https://dev.mysql.com/doc/refman/5.6/en/innodb-fulltext-index.html" target="_blank">mysql 5.6 document</a>。</p><h2>MySQL全文索引的建立
</h2></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2018_06_14_001_mysql_non-mainstream_fuzzy_query_full-text_index.html"><a href="/post/2018_06_14_001_mysql_non-mainstream_fuzzy_query_full-text_index.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="图像主题色提取简单实现（二）" href="/post/2018_02_25_image_theme_color_2.html">图像主题色提取简单实现（二）</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2018-02-25</span>
            </div>
        </div>
        <div class="post-content"><p>在文章<a title="图像主题色提取简单实现" href="./" target="_blank">图像主题色提取简单实现</a>一文中，对颜色空间八等分，即r/g/b三个方向从128处切分，获取八个小的立方体，对每个立方体像素坐标值求平均数，得到八种颜色，效果还算理想，但限制也很明显。比如颜色数目固定，如果图片颜色单一，可能最后八个小立方体中出现没有值的情况。</p><h2>解决方案
</h2><p>针对上一个实现，每次切分前对颜色空间进行排序，选择rank最前的进行切分，每次切分的位置也加入像素数量因素，其中：</p></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2018_02_25_image_theme_color_2.html"><a href="/post/2018_02_25_image_theme_color_2.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="MySql索引的使用" href="/post/2017_08_12_the_use_of_mysql_index.html">MySql索引的使用</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2017-08-12</span>
            </div>
        </div>
        <div class="post-content"><p>上一篇文章<a title="分页查询时SQL优化" href="./" target="_blank">分页查询时SQL优化</a>中没有使用索引，但在一般的业务场景中都会涉及到模糊查询，如果模糊查询的条件在多张表中，而且不方便设置冗余字段来调整，就需要使用到索引了。MySql的缺省引擎为<code>InnoDB</code>，也是最主流的引擎，本文以其上的<code>Btree</code>索引进行讲解。</p><p>关于索引的技术细节，推荐文章：<a title="理解MySQL——索引与优化" href="https://www.cnblogs.com/hustcat/archive/2009/10/28/1591648.html" target="_blank">理解MySQL——索引与优化</a></p><h2>sql语句分析
</h2></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2017_08_12_the_use_of_mysql_index.html"><a href="/post/2017_08_12_the_use_of_mysql_index.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="分页查询时SQL优化" href="/post/2017_08_07_sql_optimization_for_paging_query.html">分页查询时SQL优化</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2017-08-07</span>
            </div>
        </div>
        <div class="post-content"><p>业务上表数据由百万上升到千万级别，涉及到多表联合分页查询，结果是查询超时。问题在于<code>JOIN</code>和<code>ORDER</code>的条件字段不一致，导致一个索引失效，排序时遍历了千万级别的中间表，最终超时。</p><p>解决办法有两个：让索引都生效或减小排序时中间表的长度。前者可以通过联合索引实现，各个数据库支持度不详；后者可以通过先查询出一部分结果再JOIN，中间表的长度有限效率就不是问题。项目中使用mysql，本文就以mysql为例说明。</p><h2>mysql 语句的执行流程
</h2></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2017_08_07_sql_optimization_for_paging_query.html"><a href="/post/2017_08_07_sql_optimization_for_paging_query.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="图像主题色提取简单实现" href="/post/2017_04_23_image_theme_color_1.html">图像主题色提取简单实现</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2017-04-23</span>
            </div>
        </div>
        <div class="post-content"><p>图像主题颜色的应用越来越多，如<a title="google相册" href="https://photos.google.com/" target="_blank">google相册</a>可以按照颜色对图片进行检索，<a title="design-seeds" href="https://www.design-seeds.com/" target="_blank">design-seeds</a>上的色彩设计。相关算法主要有中位切分法、八叉树提取法和KMean clustering 等算法。关于这些算法，推荐这两篇文章，写的非常好：<a title="图像主题色提取算法" href="http://blog.rainy.im/2015/11/24/extract-color-themes-from-images/" target="_blank">图像主题色提取算法</a>和<a title="图片主题色提取算法小结" href="http://blog.rainy.im/2015/11/24/extract-color-themes-from-images/" target="_blank">图片主题色提取算法小结</a>，本文只就中位切分法（Median cut）进行js的简单实现。</p><p>RGB色彩模式下，R/G/B的取值分别为0x00~0xff（0~255），将其想象成一个以RGB分别为维度的三维空间，在取值范围内构成一个立方体</p><p><img title="640px-RGB_color_solid_cube-300x225" src="/data/static/image/post_0007/640px-RGB_color_solid_cube-300x225.png"></p></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2017_04_23_image_theme_color_1.html"><a href="/post/2017_04_23_image_theme_color_1.html">查看全文</a></button>
    </div><div class="post abstract-post">
        <div class="post-title">
            <h1><a title="正则表达式的优化" href="/post/2017_03_02_optimization_of_regular_expressions.html">正则表达式的优化</a></h1>
            <div class="title-meta">
                <span class="meta-author">snowtraces</span> / <span class="meta-time">2017-03-02</span>
            </div>
        </div>
        <div class="post-content"><p>正则表达式的用途很多，比如web爬虫数据匹配，各种raw数据的清洗，或者是简单的字符串的截取。如果在写循环体内，正则表达式不够高效，会大幅影响性能。</p><p>本文主要介绍java中正则表达式的优化，其中很多内容与其他平台相同。</p><h2>正则表达式引擎
</h2></div>
        <div class="post-image"></div>
        <button class="read-more-btn" href="/post/2017_03_02_optimization_of_regular_expressions.html"><a href="/post/2017_03_02_optimization_of_regular_expressions.html">查看全文</a></button>
    </div></div>
        </div>
    </div>
    
    <script>
        window.addEventListener("popstate", function (e) {
            let path = window.location.href
            let url_segs = path.split('#')
            if (url_segs.length >= 3) {
                let cat = url_segs[1]
                let param = url_segs[2]
                if (cat === 'post') {
                    window.eventHub.emit('post-detail', { data: param })
                }
            } else {
                window.eventHub.emit('post-list', { pushStat: false })
            }
        }, false);
    </script>


<script src="/js/util/function.js?version=1723974088984"></script><script src="/js/util/markdown.js?version=1723974088984"></script><script src="/js/util/event-hub.js?version=1723974088984"></script><script src="/js/entity.js?version=1723974088984"></script><script src="/js/3rdparty/prism.js?version=1723974088984"></script><script src="https://static.codepen.io/assets/embed/ei.js?version=1723974088984"></script><script src="/js/util/saveData.js?version=1723974088984"></script></body></html>